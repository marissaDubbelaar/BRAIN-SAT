webpackJsonp([1],{119:function(e,t){},120:function(e,t){},125:function(e,t,n){var a=n(5)(n(66),n(129),null,null,null);e.exports=a.exports},126:function(e,t,n){function a(e){n(119)}var r=n(5)(n(67),n(131),a,null,null);e.exports=r.exports},127:function(e,t,n){var a=n(5)(n(69),n(133),null,null,null);e.exports=a.exports},128:function(e,t,n){function a(e){n(120)}var r=n(5)(n(70),n(135),a,null,null);e.exports=r.exports},129:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"well",attrs:{id:"singleCellWell"}},[n("div",{staticClass:"homepage row"},[n("div",[n("parameter-form")],1),e._v(" "),n("div",{staticClass:"row"},[n("plot"),e._v(" "),n("div",{staticClass:"row"},[n("barplot"),e._v(" "),n("pie-chart")],1)],1)])])},staticRenderFns:[]}},130:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"col-md-4 col-xs-6 col-sm-6",staticStyle:{height:"400px"},attrs:{id:"pieChartVis",align:"center"}})},staticRenderFns:[]}},131:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"inputs"}},[n("typeahead",{attrs:{options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},staticRenderFns:[]}},132:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"col-md-4 col-xs-6 col-sm-6",staticStyle:{height:"400px"},attrs:{id:"barplotVis",align:"center"}})},staticRenderFns:[]}},133:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%"}},[e.loading?n("div",[n("Spinner",{attrs:{message:"Loading...",size:"55","line-fg-color":"#519ABC"}})],1):e._e(),e._v(" "),n("div",{staticClass:"col-md-8 col-xs-12 col-sm-12",attrs:{id:"tSNEplot",align:"center"}})])},staticRenderFns:[]}},134:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("home-page")],1)},staticRenderFns:[]}},135:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-8",attrs:{id:"chosenGene"}},[n("h2",[n("span",{ref:"text",staticClass:"typeahead__text"},[n("b",[e._v(e._s(e.displayText))])])])]),e._v(" "),n("div",{staticClass:"col-md-4 typeaheadState"},[n("div",{ref:"toggle",staticClass:"typeahead__toggle panel-body",on:{mousedown:function(t){return t.preventDefault(),e.toggle(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"search",staticClass:"typeahead__search col-md-4 input-group pull-right",attrs:{type:"text"},domProps:{value:e.search},on:{focus:e.onFocus,blur:e.onBlur,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.onEscape(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.onDownKey(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.onUpKey(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnterKey(t)}],input:function(t){t.target.composing||(e.search=t.target.value)}}})]),e._v(" "),e.character?n("ul",{ref:"list",staticClass:"typeahead__list"},e._l(e.filteredOptions,function(t,a){return n("li",{key:a,staticClass:"typeahead__item"},[n("a",{staticClass:"typeahead__link",class:[e.selectIndex===a?"typeahead__active":""],on:{mousedown:function(n){return n.preventDefault(),e.select(t)}}},[e._v("\n            "+e._s(t.text)+"\n          ")])])}),0):e._e()]),e._v(" "),n("hr")])},staticRenderFns:[]}},19:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u});var a,r=n(34),o=n.n(r),s=n(59),i=n(20),l="__GET_PLOT_DATA__",c="__GET_PLOT_ALPHA__",u="__GET_PLOT_GENES__",p=[];t.d=(a={},o()(a,l,function(e){var t=e.commit,a=window.__INITIAL_STATE__;return n.i(s.a)("/scripts/singleCellAnalysis/run?entityName=base_"+a+"&targetFile=base_"+a+"Targets").then(function(e){return e.text().then(function(e){t(i.a,e)})},function(e){console.log(e)})}),o()(a,u,function(e){var t=e.commit,a=window.__INITIAL_STATE__;return n.i(s.a)("/api/v2/base_"+a+"?num=10000").then(function(e){for(var n=e.items,a=0;a<n.length;a++)p.push(n[a].geneSym);t(i.b,p)},function(e){console.log(e)})}),o()(a,c,function(e,t){var a=e.commit,r=window.__INITIAL_STATE__;return n.i(s.a)("/api/v2/base_"+r+"?q=geneSym=="+t).then(function(e){a(i.c,e.items[0])},function(e){console.log(e)})}),a)},20:function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c});var a,r=n(34),o=n.n(r),s="__SET_OPACITY__",i="__SET_PLOT_DATA__",l="__SET_PLOT_ALPHA__",c="__SET_PLOT_GENES__";t.e=(a={},o()(a,s,function(e,t){e.opacity=t}),o()(a,i,function(e,t){e.data.plot=t}),o()(a,l,function(e,t){e.data.alpha=t}),o()(a,c,function(e,t){e.genes=t}),a)},51:function(e,t,n){var a=n(5)(n(65),n(132),null,null,null);e.exports=a.exports},52:function(e,t,n){var a=n(5)(n(68),n(130),null,null,null);e.exports=a.exports},53:function(e,t,n){"use strict";var a=n(33),r=n.n(a),o=n(32),s=n(62),i=n(20),l=n(61),c=n(19);r.a.use(o.c),t.a=new o.c.Store({state:s.a,mutations:i.e,actions:c.d,getters:l.a,strict:!1})},55:function(e,t){},56:function(e,t){},57:function(e,t,n){var a=n(5)(n(64),n(134),null,null,null);e.exports=a.exports},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(54),r=(n.n(a),n(33)),o=n.n(r),s=n(53),i=n(57),l=n.n(i),c=n(55),u=(n.n(c),n(56)),p=(n.n(u),n(58)),d=n.n(p);o.a.use(d.a),new o.a({el:"#app",store:s.a,template:"<App />",components:{App:l.a}})},61:function(e,t,n){"use strict";t.a={getPlotData:function(e){return e.data.plot&&e.data.plot}}},62:function(e,t,n){"use strict";var a={opacity:[],data:{plot:{},alpha:{}},genes:[]};t.a=a},63:function(e,t,n){"use strict";var a=n(21),r=n.n(a),o=function(e){var t={};for(var n in e){var a=e[n];"probes"!==n&&"geneSym"!==n&&"_href"!==n&&(t[n]=a)}var o=r()(t).map(function(e){return t[e]}),s=Math.max.apply(null,o),i={};for(var l in t){var c=t[l],u=c/s;u<.2&&(u=.2),i[l]=u}return i},s=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})};t.a={calculateOpacity:o,capitalizeEachWord:s}},64:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(125),r=n.n(a);t.default={name:"molgenis-app",components:{HomePage:r.a}}},65:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n.n(a),o=n(31),s=n.n(o);t.default={name:"barplot",template:"<div></div>",methods:{createBarplot:function(e,t,n,a,o){delete n._href,delete n.probes,delete n.geneSym;for(var i=s.a.d3.range(20).map(s.a.d3.scale.category20()),l=[],c=0;c<e.length;c++){for(var u=[],p=0;p<a.length;p++)e[c]===a[p]&&u.push(r()(n)[p]);l.push(u)}for(var d={},h=[],f=0;f<e.length;f++){for(var _=0,v=0;v<a.length;v++)e[f]===a[v]&&(_+=r()(n)[v]);d[e[f]]=_,h.push(e[f].split("_").join(" ").trim())}for(var m=0;m<e.length;m++)e[m]=e[m].replace(/___/g,"_").split("_").join(" ").trim();for(var g=[],y=0;y<l.length;y++){var x=l[y];g.push({y:x,type:"box",name:e[y],marker:{color:i[y]},hoverinfo:"y",boxpoints:"overallAvg"})}var b={hovermode:"closest",showlegend:!1,barmode:"group",yaxis:{title:"CPM expression level"},xaxis:{showticklabels:!1},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};s.a.newPlot("barplotVis",g,b,o)}}}},66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(126),r=n.n(a),o=n(127),s=n.n(o),i=n(52),l=n.n(i),c=n(51),u=n.n(c);t.default={name:"home-page",components:{ParameterForm:r.a,Plot:s.a,PieChart:l.a,Barplot:u.a}}},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(35),r=n.n(a),o=n(19),s=n(20),i=n(63),l=n(32),c=n(128),u=n.n(c);t.default={name:"parameter-form",components:{Typeahead:u.a},computed:r()({},n.i(l.b)(["genes"])),beforeCreate:function(){var e=this;this.selected=null,this.gene="",this.$store.dispatch(o.b).then(function(){e.createObject()})},data:function(){return{selected:null,options:[],gene:this.selected,study:""}},watch:{selected:function(e){""!==e&&(this.gene=this.options[e].text)},gene:function(e){var t=this;""!==e?this.$store.dispatch(o.c,e).then(function(){var e=t.$store.state.data.alpha||{};t.$store.commit(s.d,i.a.calculateOpacity(e))}):this.$store.commit(s.d,1)}},methods:{createObject:function(){for(var e=0;e<this.genes.length;e++){var t={};t.id=e,t.text=this.genes[e],this.options.push(t)}}}}},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(21),r=n.n(a),o=n(22),s=n.n(o),i=n(31),l=n.n(i);t.default={name:"vue-chart",template:"<div></div>",methods:{createChart:function(e,t,n,a,o){delete n._href,delete n.probes,delete n.geneSym;for(var i=l.a.d3.range(20).map(l.a.d3.scale.category20()),c={},u=[],p=0;p<e.length;p++){for(var d=0,h=0;h<a.length;h++)e[p]===a[h]&&(d+=s()(n)[h]);c[e[p]]=d,u.push(e[p].split("_").join(" ").trim())}for(var f=[],_=0;_<e.length;_++)if(e[_]===r()(c)[_]){var v=s()(c)[_]/t[_];f.push(v)}var m=[{values:f,labels:u,type:"pie",marker:{colors:i},sort:!1,hoverinfo:"label+percent"}],g={showlegend:!1,paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",legend:{orientation:"h",xanchor:"center",y:1.2,x:.5}};l.a.newPlot("pieChartVis",m,g,o)}}}},69:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n.n(a),o=n(21),s=n.n(o),i=n(35),l=n.n(i),c=n(31),u=n.n(c),p=n(19),d=n(32),h=n(52),f=n.n(h),_=n(51),v=n.n(_),m=n(136),g=n.n(m);t.default={name:"vue-plot",template:"<div></div>",computed:l()({},n.i(d.a)({plot:"getPlotData"}),n.i(d.b)(["opacity"])),data:function(){return{loading:!0,testPlotData:""}},components:{Spinner:g.a},watch:{opacity:function(e){this.createPlot(e)}},mounted:function(){var e=this;this.$store.dispatch(p.a).then(function(){if(""!==e.plot){var t=e.plot.split("V5")[1];e.testPlotData=t}e.createPlot(1)})},methods:{createPlot:function(e){this.loading=!0;for(var t=this.testPlotData,n=t.trim().split(/[ ,\n"]+/),a=[],o=[],i=[],l=[],c=[],p=[],d=[],h=[],_=[],m=0,g=0;g<n.length;g++)6===m?m=0:1===m?o.push(parseFloat(n[g])):2===m?i.push(parseFloat(n[g])):3===m?(l.includes(parseInt(n[g]))||d.push(parseInt(n[g])),l.push(parseInt(n[g]))):4===m?c.push(n[g]):5===m&&(p.push(n[g]),h.includes(n[g])||h.push(n[g])),m+=1;for(var y=0;y<s()(e).length;y++){for(var x=[],b=0;b<c.length;b++)s()(e)[y]===c[b]&&x.push(r()(e)[y]);_.push(x[0])}var w=d.length,C=[],E=[];for(var P in d){for(var S=d[P],T=parseInt(P),O=h[T],k=[],A=[],I=[],$=[],j=-1,D=u.a.d3.range(20).map(u.a.d3.scale.category20());-1!==(j=l.indexOf(S,j+1));)k.push(o[j]),A.push(i[j]),I.push(c[j]),$.push(_[j]);a.push(k.length),C.push(O),E.push({x:k,y:A,mode:"markers",type:"scatter",name:O.split("_").join(" ").trim().replace("   "," "),text:I,hoverinfo:"name+text",marker:{size:10,color:D[P],opacity:$}})}var L={showLink:!1,displaylogo:!1,modeBarButtonsToRemove:["zoom2d","select2d","pan","pan2d","lasso2d","autoScale2d","sendDataToCloud","toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian","zoomIn2d","zoomOut2d","resetScale2d","hoverClosestPie"]},N={showlegend:!0,xaxis:{title:"tSNE dim 1"},yaxis:{title:"tSNE dim 2"},legend:{orientation:"h",tracegroupgap:2,x:.5,y:1.2},hovermode:"closest",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!1,width:document.getElementById("tSNEplot").clientWidth,height:document.getElementById("tSNEplot").clientWidth};if(u.a.newPlot("tSNEplot",E,N,L),this.loading=!1,1!==e){var F=this.$store.state.data.alpha||{};f.a.methods.createChart(C,a,F,p,L),v.a.methods.createBarplot(C,w,F,p,L)}}}}},70:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{options:{type:Array,default:function(){return[]}},value:{type:[String,Number],default:null}},data:function(){return{open:!1,selectIndex:0,displayText:"",search:"",character:!1}},watch:{search:function(e){e.length>=3?this.character=!0:this.character=!1}},computed:{typeaheadState:function(){return this.open?"typeahead typeahead__open":"typeahead"},filteredOptions:function(){var e=new RegExp(this.search,"i");return this.options.filter(function(t){return e.test(t.id)||e.test(t.text)})}},methods:{onDownKey:function(){this.filteredOptions.length-1>this.selectIndex&&this.selectIndex++},onUpKey:function(){this.selectIndex>0&&this.selectIndex--},onEnterKey:function(){var e=this.filteredOptions[this.selectIndex];e&&this.select(e)},select:function(e){this.displayText=e.text,this.$emit("input",e.id),this.$refs.search.blur()},toggle:function(e){e.target!==this.$refs.toggle&&e.target!==this.$refs.search&&e.target!==this.$refs.text||(this.open?e.target!==this.$refs.search&&e.target!==this.$refs.text&&this.$refs.search.blur():this.$refs.search.focus())},onFocus:function(){this.open=!0},onBlur:function(){this.search="",this.open=!1},onEscape:function(){this.$refs.search.blur()}}}}},[60]);